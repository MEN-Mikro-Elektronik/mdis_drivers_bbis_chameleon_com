===== [ History of fileset COM/DRIVERS/BBIS/chameleon ] =====


-----[ Revision 1.63 ]-----
[ 2014-10-30 12:43:10 by ch ]
R:1. MDIS projects with F50P didnt work on VxWorks versions without multiple PCI domains
  2. New version of mcvs
  3. New version of header chameleon.h, men_typs.h and mdis_com.h
M:1. changed behavior for PCI_BUS_PATH with VxWorks versions <=6.6
  2. Checking in with mcvs 4
  3. Update chameleon.h, men_typs.h and mdis_com.h

-----[ Revision 1.62 ]-----
[ 2013-11-05 14:43:49 by ts ]

File /_CVS_/COM/DRIVERS/BBIS/CHAMELEON/DRIVER/COM/bb_chameleon.c RCS 1.45 -> RCS 1.47
   R: MDIS project compiled under gcc 4.6 showed warnings about casts
   M: cast accesses in IoRead/Write macros to (MACCESS)
   R: only single PCI domain is supported so far
   M:add OSS_VXBUS_SUPPORT to support multiple PCI domains
File /_CVS_/COM/INCLUDE/dbg.h RCS 1.23 -> RCS 1.25
   R: external Dbg_Init,Dbg_Exit functions replaced with blank defines
   M: added external prototypes again to avoid compiler errors, removed defines
   R: FPGA_Load for Windows 64bit needs OS specific macros
   M: changed/added defines and headers for Windows7 x64
File /_CVS_/COM/INCLUDE/men_typs.h RCS 1.30 -> RCS 1.31
   R: customer using PP04 had compile problem under 3.4.18-rt
   M: customer system defined _LP64, not _LIN64, so use this define too

-----[ Revision 1.61 ]-----
[ 2012-05-23 18:17:05 by ts ]
bb_chameleon.c
 R: compiler warnung about uninitialized variable under Ubuntu 12.04
 M: init with chamTblInt=0

-----[ Revision 1.60 ]-----
[ 2012-05-14 22:30:05 by ts ]
New MDIS Package

-----[ Revision 1.59 ]-----
[ 2012-03-21 14:17:51 by dpfeuffer ]
R:1. support for FPGA at SC24 LPC bus
M:1.a) ISA variant: use IRQs from CHAMELEON table per default
    b) ISA variant: report IRQs as shared

-----[ Revision 1.58 ]-----
[ 2011-05-23 12:03:33 by CRuff ]
R: 1. support of pci domains
   2. requesting BBIS_CFGINFO_ADDRSPACE may cause segmentation fault for
      non-existing devices
   3. bugfixes
   3a) in CHAMELEON_CfgInfo: check for interrupt availability for PCITABLE use
       not correct
   3b) definition of MAC_MEM_MAPPED / MAC_IO_MAPPED for mixed mode caused
       warning during linux build
M: 1a) added handling of code BBIS_CFGINFO_PCI_DOMAIN to CHAMELEON_CfgInfo()
   1b) added new member pciDomainNbr to BBIS_HANDLE
   1c) extend debug prints of pci bus number to also print the domain number
   1d) for all interface calls that use the bus number: call with merged
       bus / domain
   1e) in ParsePciPath(): look for root device on all busses instead of
       expecting root device on bus 0
   2. CfgInfo(BBIS_CFGINFO_ADDRSPACE): break with error code BBIS_ILL_SLOT
      in case the device does not exist
   3a) dereference level pointer before checking the value
   3b) fixed handling of IO/MEM MAPPED: undef symbol if necessary

-----[ Revision 1.57 ]-----
[ 2011-01-19 11:32:00 by dpfeuffer ]
R:1. chameleon FPGA at ISA bus
  2. chameleon BBIS shall support mem and io mapped chameleon units
  3. CHAMELEON_BrdInit/Exit calls OSS_UnMapVirtAddr with wrong addr type
     for io mapped GIRQs
  4. BB_CfgInfo(BBIS_CFGINFO_SLOT) shall indicate io mapped units
  5. some WDK compiler warnings
  6. number of supported devices too less
M:1. variant ISA implemented
  2. CHAMELEON_CfgInfo(BBIS_CFGINFO_ADDRSPACE) implemented
  3. using addr type according GIRQ unit mapping
  4. for io mapped units, BBIS_CFGINFO_SLOT devName is:
     - _IO if chameleon device is unknown
     - prefixed with IO_ if chameleon device is known
  5. some little fixes
  6. number of supported devices increased from 32 to 256

-----[ Revision 1.56 ]-----
[ 2010-12-01 12:01:01 by CKauntz ]
R:1.a) CHAMELEON_IrqEnable not multiprocessor safe
    b) irqHandle will be overwritten on multiple calls of SetIrqHandle,
       OSS_IrqMaskR uses invalid irqHdl
  2. Preparation for INUSE bit in GIRQ unit for hardware locking
M:1.a) Added OSS_SpinLockXxx routines to use an BBIS specific spinlock
    b) Added switch BBIS_DONT_USE_IRQ_MASKR to skip OSS_IrqMaskR,
       OSS_Restore and CHAMELEON_SetIrqHandle routines
  2. Added support for INUSE bit in GIRQ unit

-----[ Revision 1.55 ]-----
[ 2010-09-27 12:00:31 by CKauntz ]
R: devCount value increases when repeated calls of *_BrdInit
   multiple devices appear on WINDOWS
M: Added devCountInit to start with devCount value from Init

-----[ Revision 1.54 ]-----
[ 2010-06-21 20:48:15 by ch ]
Update common headers

-----[ Revision 1.53 ]-----
[ 2010-01-28 15:33:56 by ufranke ]
cosmetics in common headers

-----[ Revision 1.52 ]-----
[ 2009-10-19 13:43:01 by CKauntz ]
R:1. Unused driver_iom.mak
  2. Old style for main.html
M:1. Removed driver_iom.mak
  2. Updated style

-----[ Revision 1.51 ]-----
[ 2009-10-14 09:42:59 by CKauntz ]
R: Linker Error: cant find CHAM_InitMem for Variant Io
M: Added CHAMV2_VARIANT switch to use CHAM_InitIo

-----[ Revision 1.50 ]-----
[ 2009-09-25 14:23:48 by CRuff ]
R: MDIS5 for linux release
M: a) remove check for mapping (chameleon BBIS now exists in IO and
      MEM mapped variant)
   b) removed conditional ChamInit call in BrdInit; correct init method is
      selected by chameleon.h
   c) initialize variables to avoid compiler warnings

-----[ Revision 1.49 ]-----
[ 2009-09-09 12:33:16 by dpfeuffer ]
R: Windows bug check because erroneous group handling if group base-device
   is not excluded but group sub-device is excluded.
M: AUTOENUM_EXCLUDING(V2) applies no longer to group sub-devices

-----[ Revision 1.48 ]-----
[ 2009-09-02 16:13:54 by dpfeuffer ]
R: chameleon.h is not public and a reference file
M: chameleon.h category changed from src,public,noref to src

-----[ Revision 1.47 ]-----
[ 2009-07-31 14:53:10 by dpfeuffer ]
R: porting to MDIS5 according porting guide rev. 0.7
M: cosmetics

-----[ Revision 1.46 ]-----
[ 2009-05-27 11:13:31 by dpfeuffer ]
- bb_chameleon.c
  R:1. Improvment of debug output
    2. LL-drv got the one address space of a single device several times if
       address spaces of a group device were requested
  M:1. CHAMELEON_BrdInit(): print always chameleon-V2 table info
    2. CHAMELEON_GetMAddr(): error handling improved for single devices

-----[ Revision 1.45 ]-----
[ 2009-05-18 14:38:26 by dpfeuffer ]
- bb_chameleon.c
  R:1. BrdInit:autoEnum (with Chameleon groups) was not working at all
       it caused data access exceptions, ...
    2. generally group handling not really tested yet, not working properly
    3. support of multifunction bridges
  M:1.a) correctly initialize devId[x] in group handles
      b) fix OSS_MemCopy call (too much dereference)
    2.a) inside groups use device index rather than instance
      b) CfgInfoSlot: add group information to slot name
    3.a) in PciParseDev(): hand over the function num to OSS_PciGetConfig
         if necessary
      b) allow multifunction bridge type when pci headertype is checked
- bb_chameleon.h
  R:1. Windows failed to find GetEntry function (expects to be called BBIS_*)
    2. no default prefix for chameleon variant GetEntry was defined
  M:1. when ONE_NAMESPACE_PER_DRIVER is set:
       GetEntry funciton is BBIS_GetEntry
    2. when nothing else set use CHAMELEON_ as variant prefix

-----[ Revision 1.44 ]-----
[ 2009-04-03 15:15:04 by dpfeuffer ]
R: MDIS4 for Windows: MK does not support OSS_BUSTYPE_CHAM as device bus type
M: Under MDIS4 for Windows SMBPCI_BrdInfo(BBIS_BRDINFO_DEVBUSTYPE) uses
   OSS_BUSTYPE_NONE as device bus type

-----[ Revision 1.43 ]-----
[ 2009-04-01 14:19:24 by ufranke ]
cosmetics

-----[ Revision 1.42 ]-----
[ 2009-03-17 15:55:28 by dpfeuffer ]
bb_chameleon.c
R: 1. no support for MDIS5
   2. under Windows, a precise device bustype is required to indicate chameleon
M: 1. SetStat/GetStat interface and debug prints modified for MDIS5
   2. SMBPCI_BrdInfo(BBIS_BRDINFO_DEVBUSTYPE) changed from
      OSS_BUSTYPE_NONE to OSS_BUSTYPE_CHAM

-----[ Revision 1.41 ]-----
[ 2009-02-18 14:31:22 by GLeonhardt ]
R:1. checkin for release of 10F302-90

-----[ Revision 1.40 ]-----
[ 2008-09-26 15:17:58 by ufranke ]
 R: diab compiler warnings
 M: cosmetics
 R:1. setStat/getStat protptype doesn't support 64-bit
 M:1. setStat/getStat protptyp changed to INT32_OR_64

-----[ Revision 1.39 ]-----
[ 2008-07-11 09:17:51 by dpfeuffer ]
- bb_chameleon.c
  R:1. CHAMELEON_BrdInit did not free all ressources on exit
    2. when group was first DEV in BBIS descriptor (Slot 0) it was ignored
    3. descriptor said group has 2 devices; driver would look for *_MAX_DEVS
    4. example for descriptor showed DESC lib internal view (GROUP_1/GROUP_ID)
    5. when a group was detected always _MAX_DEVS*CHAMELEONV2_UNIT
        structures where allocated, independant of how many where needed
    6. when compiled with VS 2008: some casting errors were occured
    7. PCI chameleon FPGA was restricted to function=0 location
  M:1 call chamFuncTbl.Term when handle still valid on exit
    2. fix descriptor parsing in CHAMELEON_Init()
    3. fix abort criteria in CHAMELEON_BrdInit()
    4. fix example for descriptors to show actual example as in system.dsc
    5. only allocate dev info structure when actually needed inside a group
    6. some casts added
    7. optional descriptor key PCI_FUNCTION_NUMBER implemented to support PCI functions>0

-----[ Revision 1.38 ]-----
[ 2008-02-28 17:20:59 by aw ]
men_typs.h
   - INT32_OR_64 and __MAPILIB for Windows 64bit defined
   - set WINNT switch if _WIN32 switch is set

-----[ Revision 1.37 ]-----
[ 2008-01-25 13:49:42 by ufranke ]
cosmetics

-----[ Revision 1.36 ]-----
[ 2007-12-10 11:55:53 by ts ]
D
chameleon.h
   const char *name makes problems under OS9000, no memory was allocated.
   -> const char name[20] for OS9000
   added:
     + name string for CUSTOMER_MODULE

-----[ Revision 1.35 ]-----
[ 2007-09-25 15:51:55 by aw ]
chameleon.h
   changed:
     - when CHAMV2_VARIANT not defined default init function to CHAM_InitMem
       reason: CHAM_Init not exported when built using MDIS environment
               When multiple (IO/MEM/SW) libs are built: conflicting symbols

-----[ Revision 1.34 ]-----
[ 2007-08-21 12:10:55 by aw ]
bb_chameleon.c RCS 1.17 -> RCS 1.18
   bugfix

-----[ Revision 1.33 ]-----
[ 2007-07-20 18:55:40 by aw ]
*** CHANGED FILES ***
File /_CVS_/COM/INCLUDE/chameleon.h RCS 3.22 -> RCS 3.24
   changed: by default only ChameleonV2 API exported
   added swapped CHAM_Init versions
   added:
     + G_ChamTbl[] from chameleon_strings.c
     + 16Z086_INTERBUS string

-----[ Revision 1.32 ]-----
[ 2007-06-18 17:28:31 by aw ]
*** empty log message ***

-----[ Revision 1.31 ]-----
[ 2007-06-18 10:11:39 by aw ]
|
driver.mak
   changed library sequence

-----[ Revision 1.30 ]-----
[ 2007-06-06 15:32:22 by aw ]
*** CHANGED FILES ***
File /_CVS_/COM/INCLUDE/chameleon.h RCS 3.21 -> RCS 3.22
   added defines for PCI Vendor IDs for Altera and MEN

-----[ Revision 1.29 ]-----
[ 2007-05-11 15:30:54 by ts ]
*** CHANGED FILES ***
File chameleon.h
   Added 16Z057 (modified Z025, different IRQ handling)

-----[ Revision 1.28 ]-----
[ 2007-03-28 16:47:32 by ts ]
*** CHANGED FILES ***
File /_CVS_/COM/INCLUDE/maccess.h RCS 1.14 -> RCS 1.15
   changed
   + NIOS_II to NIOS_II_ALTERA_IDE to stay mac_mem.h for NIOS MENMON

-----[ Revision 1.27 ]-----
[ 2007-02-26 12:13:26 by DPfeuffer ]
- GIRQ UNIT support fixed to support _IO variant

-----[ Revision 1.26 ]-----
[ 2007-02-26 11:25:34 by DPfeuffer ]
cosmetics

-----[ Revision 1.25 ]-----
[ 2006-12-15 13:18:46 by ts ]
*** CHANGED FILES ***
File bb_chameleon.c
   added
    + fkt13 is now CHAMELEON_SetIrqHandle()
    + GIRQ unit support for BB irqEnable()
File bb_entry.h
   changed
   - fkt13() is now setIrqHandle() for CHAMELEON GIRQ support
     because GIRQ is not designed for BBIS ( seperate register for each IRQ enable )
     we must be able to lock/unlock IRQ in BBIS itself

-----[ Revision 1.24 ]-----
[ 2006-08-18 12:02:29 by ub ]
Added definitions for EP01

-----[ Revision 1.23 ]-----
[ 2006-08-02 15:55:22 by DPfeuffer ]
- supports unknown chameleon devices for autoenum

-----[ Revision 1.22 ]-----
[ 2006-08-01 12:05:19 by DPfeuffer ]
- bb_chameleon.c
   - CHAMELEON_Init(): get AUTOENUM_EXCLUDINGV2 desc-key fixed
   - CHAMELEON_BrdInit(): fixed: InitPci() was called without OSS handle
   - CfgInfoSlot(): slot name includes now the chameleon device instance
   - some casts for Windows compiler added
- chameleon.h
   + CHAMELEON_16Z082_TACHO unit 0x3a

-----[ Revision 1.21 ]-----
[ 2006-07-25 15:31:21 by ufranke ]
cosmetics

-----[ Revision 1.20 ]-----
[ 2006-07-17 14:42:28 by ufranke ]
cosmetics

-----[ Revision 1.19 ]-----
[ 2006-06-02 11:35:02 by ufranke ]
changed:
 - use Chameleon V2 lib
 - support up to 32 devices and 16 groups (32 devices each)
added
 + 16Z074, 16Z079, 16Z080, 16Z081

-----[ Revision 1.18 ]-----
[ 2006-02-22 12:09:55 by ub ]
Added support for third CAN controller

-----[ Revision 1.17 ]-----
[ 2005-12-23 15:36:24 by UFRANKE ]
added
 + IP cores 072..077
changed
 - define for modCode 16Z052_* (devId 0x20)
   16Z052_SRAM was never used and was replaced by 16Z052_GIRQ

-----[ Revision 1.16 ]-----
[ 2005-09-14 08:46:01 by ts ]
Ô
chameleon.h: added IP cores 065..069

-----[ Revision 1.15 ]-----
[ 2005-08-03 11:23:18 by dpfeuffer ]
added chamf8.dsc, driver_pcitbl_io.mak

-----[ Revision 1.14 ]-----
[ 2005-07-27 12:59:20 by dpfeuffer ]
- added driver_io.mak (with usual suffix _io) for IO variant
- bb_chameleon.c - CfgInfoSlot(): ChameleonHwName() replaced with ChameleonModName()
- chameleon.h changes:
  -16Z063 from NAND to NAND_RAW
  -16Z053 from NAND to IDE

-----[ Revision 1.13 ]-----
[ 2005-06-30 11:02:20 by UFranke ]
File /_CVS_/COM/INCLUDE/chameleon.h RCS 3.3 -> RCS 3.9
removed
 - EM01 and EM03 defines (use em0x_cfg.h instead!)
added
 + Updated for Chameleon-V2 support
 + CHAMELEON_PCI_DEV_ID
 + CHAMELEON_16Z064_ZOOM
 + NAND, PWM, DMA units
changed
 - CHAM_VARIANT to be compatible to old libraries

-----[ Revision 1.12 ]-----
[ 2005-02-16 15:45:41 by ub ]
- Added Makefiles for IO-mapped variants
- Added ability to use descriptor entries PCI_BUS_PATH
  and PCI_BUS_SLOT
*** ADDED FILES ***
File /_CVS_/COM/DRIVERS/BBIS/CHAMELEON/DRIVER/COM/driver_iom.mak
File /_CVS_/COM/DRIVERS/BBIS/CHAMELEON/DRIVER/COM/driver_pciom.mak
*** CHANGED FILES ***
File /_CVS_/COM/DRIVERS/BBIS/CHAMELEON/DRIVER/COM/bb_chameleon.c RCS 1.4 -> RCS 1.5
   added ability to use PCI_BUS_PATH/PCI_BUS_SLOT from descriptor
File /_CVS_/COM/INCLUDE/chameleon.h RCS 3.1 -> RCS 3.3
   + FPGA header info totSize field
   fixed bad name for CHAMELEON_16Z031_SPI
   + CHAMELEON_16Z023_IDENHS

-----[ Revision 1.11 ]-----
[ 2005-01-31 15:38:44 by ts ]
*** CHANGED FILES ***
File /_CVS_/COM/DRIVERS/BBIS/CHAMELEON/DRIVER/COM/bb_chameleon.c RCS 1.3 -> RCS 1.4
   Added: IO mapped access
File /_CVS_/COM/INCLUDE/chameleon.h RCS 2.7 -> RCS 3.1
   fixed wrong name of device ID 0x25 now 16Z044_DISP
   added new style defines CHAMELEON_16ZXXX_XXX
   added CHAMELEON_ERIVAN define
   + FPGA header parser
   cosmetics for doxygen
   added support for IO-mapped variant
   added defs for new chameleon units
   added EM03 defs
File /_CVS_/COM/INCLUDE/oss.h RCS 1.33 -> RCS 1.34
   added OSS_DL_InsertAfter prototype

-----[ Revision 1.10 ]-----
[ 2004-06-21 16:05:54 by dpfeuffer ]
*** CHANGED FILES ***
cosmetics

-----[ Revision 1.9 ]-----
[ 2004-06-08 16:26:52 by ub ]
Added capability to use irq level from PCI config space

-----[ Revision 1.8 ]-----
[ 2004-05-24 10:30:10 by dpfeuffer ]
- driver_os9.mak for OS9 added, driver.mak now common
- automatic enumeration implemented
- BrdInfo(BBIS_BRDINFO_BRDNAME) and CfgInfo(BBIS_CFGINFO_SLOT) added
- CfgInfo(BBIS_CFGINFO_IRQ): mode no longer BBIS_IRQ_EXCEPTION

-----[ Revision 1.7 ]-----
[ 2004-03-24 11:31:49 by ub ]
Added more module codes
Added CHAMELEON_CODES_ONLY switch

-----[ Revision 1.6 ]-----
[ 2003-09-11 11:04:33 by kp ]
chamem04ad66.dsc

-----[ Revision 1.5 ]-----
[ 2003-06-06 09:43:22 by kp ]
headers changed

-----[ Revision 1.4 ]-----
[ 2003-04-11 16:21:39 by kp ]
Headers changed

-----[ Revision 1.3 ]-----
[ 2003-04-02 10:39:43 by kp ]
Header changes

-----[ Revision 1.2 ]-----
[ 2003-03-03 08:11:21 by kp ]
small change in oss.h

-----[ Revision 1.1 ]-----
[ 2003-02-03 10:46:53 by kp ]
Initial Revision

